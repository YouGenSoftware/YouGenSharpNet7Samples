<!-- **** This file and its contents were generated by YouGen Sharp on (UTC) 20230307200636 on behalf of: ****
**** You Gen Software LLC ****
**** 5961 BeaconPark St ****
**** Lithia Florida 33547 United States of America ****
**** whose account is uniquely identified by: 716881407 ****
**** This file and its contents are subject to the conditions of use for the Enterprise Tier License as specified at: https://www.yougensoft.com/en/conditions-of-use. ****
**** This comment block must not be removed. ****
 -->
@implements IDisposable
@page "/procedures/Northwind_dbo_CustOrderHist/" 
@inherits ComponentBaseOverrider
<PageTitle>@modelName</PageTitle>
<MudText Typo="Typo.h3" GutterBottom="true">@modelName</MudText>
@if (waiting == true)
{
    <MudProgressCircular Color="Color.Default" Indeterminate="true" />
}
else
{
    <MudExpansionPanels>
        <MudExpansionPanel>
            <TitleContent>
                <div class="d-flex">
                    <MudText><strong>Data fetch filters</strong></MudText>
                </div>
            </TitleContent>
            <ChildContent>
                <MudCard>
                    <MudCardContent>
<MudForm Model="@inputModel" @ref="@inputForm" Validation="@(() => inputValidator.ValidateValue)" ValidationDelay="0">
<MudTextField
	InputType="InputType.Text" 
	Variant="Variant.Text"
	Label="CustomerID"
	@bind-Value="@inputModel.CustomerID"
	For="@(() => inputModel.CustomerID)"
	Clearable="true"
	Lines="0"
	MaxLength="5"
	Immediate="true" />
</MudForm>
                    </MudCardContent>
                    <MudCardActions>
                        <MudSpacer />
                        <MudButton Variant="Variant.Filled" Color="Color.Default" Class="ml-auto" OnClick="@(async () => await Execute())">Execute</MudButton>
                    </MudCardActions>
                </MudCard>
            </ChildContent>
        </MudExpansionPanel>
    </MudExpansionPanels>
	@if (queryOutput_RetrievedRecords != null)
	{
	<Northwind_dbo_CustOrderHist_OM_ProcedureQueryListTable RetrievedRecords="queryOutput_RetrievedRecords" />
	}
}
@code {
	[Inject]
	private Northwind_dbo_CustOrderHist_StoredProcedure_HttpClient? httpClient { get; set; } = default!;
	// [Inject]
	// private Northwind_dbo_CustOrderHist_StoredProcedure_SignalRWebsocketClient? websocketClient { get; set; } = default!;
	[Inject]
	private Northwind_dbo_CustOrderHist_IM_IR_FluentValidator inputValidator { get; set; } = default!;
	private Northwind_dbo_CustOrderHist_IM_IR inputModel = new Northwind_dbo_CustOrderHist_IM_IR();
	protected IEnumerable<Northwind_dbo_CustOrderHist_OM_IR>? queryOutput_RetrievedRecords;
    private MudForm? inputForm = new MudForm();
    private String modelName = "Northwind_dbo_CustOrderHist";
    private Boolean waiting;
    private async Task Execute()
    {       
	await inputForm!.Validate();
	if (!inputForm!.IsValid)
		return;
		waiting = true;
		StateHasChanged();
		queryOutput_RetrievedRecords = await httpClient!.Call_Northwind_dbo_CustOrderHist(inputModel);
		// queryOutput_RetrievedRecords = await websocketClient!.Call_Northwind_dbo_CustOrderHist(inputModel);
        waiting = false;
        StateHasChanged();
    }
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        // await websocketClient!.InitializeAsync();
    }
    protected override async Task OnParametersSetAsync() 
    {
        await base.OnParametersSetAsync();
    }
    public void Dispose()
    {
        // websocketClient?.DisposeAsync();
        // websocketClient = null;
    }
}
