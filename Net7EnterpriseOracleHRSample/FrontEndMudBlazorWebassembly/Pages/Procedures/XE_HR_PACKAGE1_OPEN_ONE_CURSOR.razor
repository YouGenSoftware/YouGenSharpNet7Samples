<!-- **** This file and its contents were generated by YouGen Sharp on (UTC) 20230307202958 on behalf of: ****
**** You Gen Software LLC ****
**** 5961 BeaconPark St ****
**** Lithia Florida 33547 United States of America ****
**** whose account is uniquely identified by: 716881407 ****
**** This file and its contents are subject to the conditions of use for the Enterprise Tier License as specified at: https://www.yougensoft.com/en/conditions-of-use. ****
**** This comment block must not be removed. ****
 -->
@implements IDisposable
@page "/procedures/XE_HR_PACKAGE1_OPEN_ONE_CURSOR/" 
@inherits ComponentBaseOverrider
<PageTitle>@modelName</PageTitle>
<MudText Typo="Typo.h3" GutterBottom="true">@modelName</MudText>
@if (waiting == true)
{
    <MudProgressCircular Color="Color.Default" Indeterminate="true" />
}
else
{
    <MudExpansionPanels>
        <MudExpansionPanel>
            <TitleContent>
                <div class="d-flex">
                    <MudText><strong>Data fetch filters</strong></MudText>
                </div>
            </TitleContent>
            <ChildContent>
                <MudCard>
                    <MudCardContent>
<MudForm Model="@inputModel" @ref="@inputForm" Validation="@(() => inputValidator.ValidateValue)" ValidationDelay="0">
<MudNumericField 
	Label="N_EMPNO"
	Variant="Variant.Text"
	@bind-Value="@inputModel.N_EMPNO"
	For="@(() => inputModel.N_EMPNO)"
	Clearable="true" 
	Step="1" 
	Immediate="true"
	T="Int32?"
	/>
</MudForm>
                    </MudCardContent>
                    <MudCardActions>
                        <MudSpacer />
                        <MudButton Variant="Variant.Filled" Color="Color.Default" Class="ml-auto" OnClick="@(async () => await Execute())">Execute</MudButton>
                    </MudCardActions>
                </MudCard>
            </ChildContent>
        </MudExpansionPanel>
    </MudExpansionPanels>
	@if (queryOutput_Query1_RetrievedRecords != null)
	{
		<XE_HR_PACKAGE1_OPEN_ONE_CURSOR_OM_Query1_ProcedureQueryListTable RetrievedRecords="queryOutput_Query1_RetrievedRecords" />
	}
}
@code {
	[Inject]
	private XE_HR_PACKAGE1_OPEN_ONE_CURSOR_StoredProcedure_HttpClient? httpClient { get; set; } = default!;
	// [Inject]
	// private XE_HR_PACKAGE1_OPEN_ONE_CURSOR_StoredProcedure_SignalRWebsocketClient? websocketClient { get; set; } = default!;
	private XE_HR_PACKAGE1_OPEN_ONE_CURSOR_IM_IR_FluentValidator inputValidator = new XE_HR_PACKAGE1_OPEN_ONE_CURSOR_IM_IR_FluentValidator();
	private XE_HR_PACKAGE1_OPEN_ONE_CURSOR_IM_IR inputModel = new XE_HR_PACKAGE1_OPEN_ONE_CURSOR_IM_IR();
	protected IEnumerable<XE_HR_PACKAGE1_OPEN_ONE_CURSOR_OM_Query1_IR>? queryOutput_Query1_RetrievedRecords;
    private MudForm? inputForm = new MudForm();
    private String modelName = "XE_HR_PACKAGE1_OPEN_ONE_CURSOR";
    private Boolean waiting;
    private async Task Execute()
    {       
	await inputForm!.Validate();
	if (!inputForm!.IsValid)
		return;
		waiting = true;
		StateHasChanged();
		var retData = await httpClient!.Call_XE_HR_PACKAGE1_OPEN_ONE_CURSOR(inputModel);
		// var retData = await websocketClient!.Call_XE_HR_PACKAGE1_OPEN_ONE_CURSOR(inputModel);
		queryOutput_Query1_RetrievedRecords = retData!.Query1_Results_IR;
        waiting = false;
        StateHasChanged();
    }
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        // await websocketClient!.InitializeAsync();
    }
    protected override async Task OnParametersSetAsync() 
    {
        await base.OnParametersSetAsync();
    }
    public void Dispose()
    {
        // websocketClient?.DisposeAsync();
        // websocketClient = null;
    }
}
